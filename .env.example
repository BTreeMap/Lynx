# Database Configuration
# Options: sqlite, postgres
DATABASE_BACKEND=sqlite
# For SQLite
DATABASE_URL=sqlite://./lynx.db
# For PostgreSQL (example)
# DATABASE_URL=postgresql://user:password@localhost/lynx
# Database connection pool size (default: 30)
# DATABASE_MAX_CONNECTIONS=30

# Cache Configuration
# Maximum number of entries in the read cache (default: 500000, approximately 100MB)
# CACHE_MAX_ENTRIES=500000
# Interval in seconds to flush buffered click statistics to database (default: 5)
# CACHE_FLUSH_INTERVAL_SECS=5
# Actor buffer size for click counting (default: 1000000)
# Larger values prevent message loss during traffic spikes
# ACTOR_BUFFER_SIZE=1000000
# Fast flush interval in milliseconds for Layer 1â†’Layer 2 (default: 100)
# Controls staleness of real-time statistics
# ACTOR_FLUSH_INTERVAL_MS=100

# API Server Configuration (for management operations)
API_HOST=127.0.0.1
API_PORT=8080

# Redirect Server Configuration (for client-facing URL redirects)
REDIRECT_HOST=127.0.0.1
REDIRECT_PORT=3000
# Optional: Explicit redirect base URL advertised to clients (e.g., https://lynx.example)
# If not set, derived from REDIRECT_SCHEME (or inferred) + host/port
# REDIRECT_BASE_URL=https://lynx.example
# Optional: Override scheme used when deriving redirect base URL (default: http/https based on port)
# REDIRECT_SCHEME=https

# Authentication Configuration
# Options: none, oauth, cloudflare
AUTH_MODE=none
# Set to 'true' to completely disable authentication (legacy, use AUTH_MODE=none instead)
# DISABLE_AUTH=false

# OAuth Configuration (only needed when AUTH_MODE=oauth)
# OAUTH_ISSUER_URL=https://auth.yourdomain.com/realms/lynx
# OAUTH_AUDIENCE=lynx-api
# Optional: Override JWKS endpoint (defaults to issuer discovery document)
# OAUTH_JWKS_URL=https://auth.yourdomain.com/realms/lynx/protocol/openid-connect/certs
# Optional: JWKS cache TTL in seconds (default: 300)
# OAUTH_JWKS_CACHE_SECS=300

# Cloudflare Zero Trust Configuration (only needed when AUTH_MODE=cloudflare)
# Team domain should be like: https://your-team-name.cloudflareaccess.com
# CLOUDFLARE_TEAM_DOMAIN=https://your-team-name.cloudflareaccess.com
# Application Audience (AUD) tag from your Access Application
# CLOUDFLARE_AUDIENCE=your-application-aud-tag
# Optional: Certificate cache TTL in seconds (default: 86400 = 24 hours)
# CLOUDFLARE_CERTS_CACHE_SECS=86400

# Frontend Configuration
# Optional: Path to directory containing static frontend files
# If not set, uses embedded frontend (bundled at compile time)
# FRONTEND_STATIC_DIR=/path/to/frontend/dist
